{
  "schemaVersion": 1,
  "items": {
    "agent-log-update": {
      "id": "agent-log-update",
      "title": "Update AGENT_LOG",
      "description": "Append a dated entry describing the global config work and test status.",
      "acceptanceCriteria": [
        "AGENT_LOG.md contains a new dated entry summarizing global config changes and test results."
      ],
      "prompt": "Append a concise entry to AGENT_LOG.md summarizing the global config implementation and tests.",
      "parentId": "global-config-tests-docs",
      "childIds": [],
      "deps": [
        "docs-configuration",
        "docs-files-storage",
        "config-tests-precedence",
        "config-tests-invalid",
        "config-tests-bounds",
        "config-tests-home-missing",
        "tui-tests-intervals"
      ],
      "status": "done",
      "createdAt": "2026-02-01T22:23:01.547661Z",
      "updatedAt": "2026-02-01T22:45:28.580049Z"
    },
    "config-defaults": {
      "id": "config-defaults",
      "title": "Define Built-in Defaults",
      "description": "Introduce constants/defaults for TUI refresh intervals.",
      "acceptanceCriteria": [
        "Default values for run/plan refresh intervals are defined in one place.",
        "Defaults match the spec (5 seconds each)."
      ],
      "prompt": "Add built-in defaults for tui refresh intervals in the config package.",
      "parentId": "global-config-core",
      "childIds": [],
      "deps": [
        "config-types"
      ],
      "status": "done",
      "createdAt": "2026-02-01T22:23:01.547661Z",
      "updatedAt": "2026-02-01T22:24:57.608284Z"
    },
    "config-load-global": {
      "id": "config-load-global",
      "title": "Load Global Config File",
      "description": "Read ~/.blackbird/config.json using os.UserHomeDir; skip if missing or home is unavailable.",
      "acceptanceCriteria": [
        "Global config is read from ~/.blackbird/config.json when home dir is available.",
        "Missing file or missing home directory does not error and falls back to next layer."
      ],
      "prompt": "Implement reading of the global config file using os.UserHomeDir; skip if missing.",
      "parentId": "global-config-core",
      "childIds": [],
      "deps": [
        "config-types"
      ],
      "status": "done",
      "createdAt": "2026-02-01T22:23:01.547661Z",
      "updatedAt": "2026-02-01T22:26:43.267082Z"
    },
    "config-load-project": {
      "id": "config-load-project",
      "title": "Load Project Config File",
      "description": "Read project .blackbird/config.json from the provided project root.",
      "acceptanceCriteria": [
        "Project config is read from \u003cproject\u003e/.blackbird/config.json when present.",
        "Missing project file does not error and falls back to next layer."
      ],
      "prompt": "Implement reading of project config from \u003cprojectRoot\u003e/.blackbird/config.json.",
      "parentId": "global-config-core",
      "childIds": [],
      "deps": [
        "config-types"
      ],
      "status": "done",
      "createdAt": "2026-02-01T22:23:01.547661Z",
      "updatedAt": "2026-02-01T22:27:34.643775Z"
    },
    "config-loader-api": {
      "id": "config-loader-api",
      "title": "Expose LoadConfig API",
      "description": "Create LoadConfig(projectRoot) that reads both layers and returns resolved config.",
      "acceptanceCriteria": [
        "LoadConfig reads global and project config, merges them, and returns resolved config.",
        "LoadConfig accepts a project root path and uses it for project config lookup."
      ],
      "prompt": "Create LoadConfig(projectRoot string) in internal/config to load and merge global/project config.",
      "parentId": "global-config-core",
      "childIds": [],
      "deps": [
        "config-load-global",
        "config-load-project",
        "config-merge-resolve"
      ],
      "status": "done",
      "createdAt": "2026-02-01T22:23:01.547661Z",
      "updatedAt": "2026-02-01T22:31:11.785923Z"
    },
    "config-merge-resolve": {
      "id": "config-merge-resolve",
      "title": "Merge with Precedence and Clamp",
      "description": "Resolve final config values using project \u003e global \u003e defaults and clamp invalid intervals.",
      "acceptanceCriteria": [
        "Resolution follows project \u003e global \u003e built-in precedence per key.",
        "Invalid interval values are clamped or replaced with next layer/default.",
        "Minimum and maximum bounds are enforced (min 1, max 300)."
      ],
      "prompt": "Implement merge logic with precedence and value clamping for interval fields.",
      "parentId": "global-config-core",
      "childIds": [],
      "deps": [
        "config-defaults",
        "config-parse-validate"
      ],
      "status": "done",
      "createdAt": "2026-02-01T22:23:01.547661Z",
      "updatedAt": "2026-02-01T22:29:55.063805Z"
    },
    "config-parse-validate": {
      "id": "config-parse-validate",
      "title": "Parse and Validate Config",
      "description": "Parse JSON, validate schemaVersion, and ignore unknown keys.",
      "acceptanceCriteria": [
        "Invalid JSON is treated as missing config for that layer.",
        "Unsupported schemaVersion is treated as missing for that layer.",
        "Unknown keys are ignored."
      ],
      "prompt": "Add JSON parsing and schemaVersion validation for config files; ignore unknown keys.",
      "parentId": "global-config-core",
      "childIds": [],
      "deps": [
        "config-types"
      ],
      "status": "done",
      "createdAt": "2026-02-01T22:23:01.547661Z",
      "updatedAt": "2026-02-01T22:28:42.502425Z"
    },
    "config-tests-bounds": {
      "id": "config-tests-bounds",
      "title": "Test Interval Bounds",
      "description": "Unit tests to verify clamping or fallback for invalid interval values.",
      "acceptanceCriteria": [
        "Values below minimum or above maximum are clamped or replaced by next layer/default."
      ],
      "prompt": "Add tests to validate interval bounds behavior for config resolution.",
      "parentId": "global-config-tests-docs",
      "childIds": [],
      "deps": [
        "config-merge-resolve"
      ],
      "status": "done",
      "createdAt": "2026-02-01T22:23:01.547661Z",
      "updatedAt": "2026-02-01T22:31:56.953352Z"
    },
    "config-tests-home-missing": {
      "id": "config-tests-home-missing",
      "title": "Test Missing Home Directory",
      "description": "Unit tests for when os.UserHomeDir fails or returns empty.",
      "acceptanceCriteria": [
        "Loader skips global config when home dir is unavailable without failing."
      ],
      "prompt": "Add tests to ensure LoadConfig behaves when os.UserHomeDir is unavailable.",
      "parentId": "global-config-tests-docs",
      "childIds": [],
      "deps": [
        "config-load-global"
      ],
      "status": "done",
      "createdAt": "2026-02-01T22:23:01.547661Z",
      "updatedAt": "2026-02-01T22:32:47.063274Z"
    },
    "config-tests-invalid": {
      "id": "config-tests-invalid",
      "title": "Test Invalid JSON and Schema",
      "description": "Unit tests for invalid JSON and unsupported schemaVersion handling.",
      "acceptanceCriteria": [
        "Invalid JSON in a layer is skipped without failing the load.",
        "Unsupported schemaVersion is skipped."
      ],
      "prompt": "Add tests for invalid JSON and schemaVersion handling in config loading.",
      "parentId": "global-config-tests-docs",
      "childIds": [],
      "deps": [
        "config-parse-validate"
      ],
      "status": "done",
      "createdAt": "2026-02-01T22:23:01.547661Z",
      "updatedAt": "2026-02-01T22:33:57.556527Z"
    },
    "config-tests-precedence": {
      "id": "config-tests-precedence",
      "title": "Test Precedence Resolution",
      "description": "Unit tests for project \u003e global \u003e default precedence resolution.",
      "acceptanceCriteria": [
        "Tests cover project override of global.",
        "Tests cover global fallback when project is missing."
      ],
      "prompt": "Add unit tests validating precedence resolution for config merging.",
      "parentId": "global-config-tests-docs",
      "childIds": [],
      "deps": [
        "config-loader-api"
      ],
      "status": "done",
      "createdAt": "2026-02-01T22:23:01.547661Z",
      "updatedAt": "2026-02-01T22:34:53.425366Z"
    },
    "config-types": {
      "id": "config-types",
      "title": "Define Config Types",
      "description": "Add Go structs for raw config and resolved config, including schemaVersion and tui interval fields.",
      "acceptanceCriteria": [
        "Config structs capture schemaVersion and tui.run/plan refresh interval fields.",
        "Types live under a new internal/config package (or equivalent) without extra dependencies."
      ],
      "prompt": "Add Go types for raw and resolved config structs under internal/config.",
      "parentId": "global-config-core",
      "childIds": [],
      "deps": [],
      "status": "done",
      "createdAt": "2026-02-01T22:23:01.547661Z",
      "updatedAt": "2026-02-01T22:24:13.091936Z"
    },
    "docs-configuration": {
      "id": "docs-configuration",
      "title": "Update Configuration Docs",
      "description": "Document config schema and precedence in docs/CONFIGURATION.md.",
      "acceptanceCriteria": [
        "Docs describe global and project config locations and precedence.",
        "Docs list schemaVersion and TUI interval keys with defaults."
      ],
      "prompt": "Update docs/CONFIGURATION.md for global/project config and schema.",
      "parentId": "global-config-tests-docs",
      "childIds": [],
      "deps": [
        "config-loader-api"
      ],
      "status": "done",
      "createdAt": "2026-02-01T22:23:01.547661Z",
      "updatedAt": "2026-02-01T22:35:46.431201Z"
    },
    "docs-files-storage": {
      "id": "docs-files-storage",
      "title": "Update Files and Storage Docs",
      "description": "List config paths in docs/FILES_AND_STORAGE.md.",
      "acceptanceCriteria": [
        "Docs list ~/.blackbird/config.json and \u003cproject\u003e/.blackbird/config.json."
      ],
      "prompt": "Update docs/FILES_AND_STORAGE.md to include global and project config files.",
      "parentId": "global-config-tests-docs",
      "childIds": [],
      "deps": [
        "config-loader-api"
      ],
      "status": "done",
      "createdAt": "2026-02-01T22:23:01.547661Z",
      "updatedAt": "2026-02-01T22:36:05.809298Z"
    },
    "global-config-core": {
      "id": "global-config-core",
      "title": "Global Config Loader Core",
      "description": "Implement config schema types and loader that merges global and project config with validation and defaults.",
      "acceptanceCriteria": [
        "Config types and defaults are defined in a new internal config package.",
        "Global and project config files are read when present.",
        "Resolved config applies project \u003e global \u003e built-in precedence with validation/clamping."
      ],
      "prompt": "Create internal config types and a loader that merges global and project configs with validation and default values.",
      "parentId": null,
      "childIds": [
        "config-types",
        "config-defaults",
        "config-parse-validate",
        "config-load-global",
        "config-load-project",
        "config-merge-resolve",
        "config-loader-api"
      ],
      "deps": [],
      "status": "done",
      "createdAt": "2026-02-01T22:23:01.547661Z",
      "updatedAt": "2026-02-01T22:31:11.785923Z"
    },
    "global-config-tests-docs": {
      "id": "global-config-tests-docs",
      "title": "Tests and Documentation",
      "description": "Add config loader tests, TUI interval coverage where appropriate, and update documentation and AGENT_LOG.",
      "acceptanceCriteria": [
        "Config loader tests cover precedence, invalid JSON, schemaVersion, and bounds.",
        "Docs updated for config locations and precedence.",
        "AGENT_LOG updated with a dated summary."
      ],
      "prompt": "Add tests and docs for the global/project config system and update AGENT_LOG.",
      "parentId": null,
      "childIds": [
        "config-tests-precedence",
        "config-tests-invalid",
        "config-tests-bounds",
        "config-tests-home-missing",
        "tui-tests-intervals",
        "docs-configuration",
        "docs-files-storage",
        "agent-log-update"
      ],
      "deps": [
        "config-loader-api",
        "global-config-tui"
      ],
      "status": "done",
      "createdAt": "2026-02-01T22:23:01.547661Z",
      "updatedAt": "2026-02-01T22:45:28.580049Z"
    },
    "global-config-tui": {
      "id": "global-config-tui",
      "title": "Wire TUI Refresh Intervals",
      "description": "Load config at TUI startup and apply refresh intervals to run/plan loaders.",
      "acceptanceCriteria": [
        "TUI loads config once at startup with project root.",
        "Run and plan refresh intervals use resolved config values instead of constants."
      ],
      "prompt": "Wire TUI to load config and apply refresh interval settings.",
      "parentId": null,
      "childIds": [
        "tui-load-config",
        "tui-wire-run-interval",
        "tui-wire-plan-interval"
      ],
      "deps": [
        "config-loader-api"
      ],
      "status": "done",
      "createdAt": "2026-02-01T22:23:01.547661Z",
      "updatedAt": "2026-02-01T22:43:18.850865Z"
    },
    "tui-load-config": {
      "id": "tui-load-config",
      "title": "Load Config at TUI Startup",
      "description": "Call LoadConfig using the project root during TUI initialization.",
      "acceptanceCriteria": [
        "TUI initialization resolves config once and stores it for use by loaders.",
        "Project root is derived from working directory (unless already passed)."
      ],
      "prompt": "Update TUI startup/init to load config via LoadConfig and store resolved values.",
      "parentId": "global-config-tui",
      "childIds": [],
      "deps": [
        "config-loader-api"
      ],
      "status": "done",
      "createdAt": "2026-02-01T22:23:01.547661Z",
      "updatedAt": "2026-02-01T22:39:57.557348Z"
    },
    "tui-tests-intervals": {
      "id": "tui-tests-intervals",
      "title": "Test TUI Interval Wiring",
      "description": "Add tests to ensure TUI loaders respect resolved config intervals.",
      "acceptanceCriteria": [
        "Tests verify run/plan loaders use configured intervals where testable.",
        "Defaults are preserved when no config is set."
      ],
      "prompt": "Add or update TUI tests to cover interval wiring from resolved config.",
      "parentId": "global-config-tests-docs",
      "childIds": [],
      "deps": [
        "global-config-tui"
      ],
      "status": "done",
      "createdAt": "2026-02-01T22:23:01.547661Z",
      "updatedAt": "2026-02-01T22:45:12.244714Z"
    },
    "tui-wire-plan-interval": {
      "id": "tui-wire-plan-interval",
      "title": "Apply Plan Refresh Interval",
      "description": "Replace the plan data refresh interval constant with resolved config value.",
      "acceptanceCriteria": [
        "Plan data refresh interval uses resolved config value.",
        "Default behavior remains 5 seconds when no config is set."
      ],
      "prompt": "Replace plan data refresh interval constant with resolved config value in the TUI plan loader.",
      "parentId": "global-config-tui",
      "childIds": [],
      "deps": [
        "tui-load-config"
      ],
      "status": "done",
      "createdAt": "2026-02-01T22:23:01.547661Z",
      "updatedAt": "2026-02-01T22:41:41.500167Z"
    },
    "tui-wire-run-interval": {
      "id": "tui-wire-run-interval",
      "title": "Apply Run Refresh Interval",
      "description": "Replace the run data refresh interval constant with resolved config value.",
      "acceptanceCriteria": [
        "Run data refresh interval uses resolved config value.",
        "Default behavior remains 5 seconds when no config is set."
      ],
      "prompt": "Replace run data refresh interval constant with resolved config value in the TUI run loader.",
      "parentId": "global-config-tui",
      "childIds": [],
      "deps": [
        "tui-load-config"
      ],
      "status": "done",
      "createdAt": "2026-02-01T22:23:01.547661Z",
      "updatedAt": "2026-02-01T22:43:18.850865Z"
    }
  }
}