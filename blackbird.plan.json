{
  "schemaVersion": 1,
  "items": {
    "checkpoint-tests-docs": {
      "id": "checkpoint-tests-docs",
      "title": "Checkpoint Tests and Docs",
      "description": "Add test coverage and documentation for the review checkpoint feature.",
      "acceptanceCriteria": [
        "Config and execution checkpoint logic are covered by unit tests.",
        "CLI and TUI review checkpoint UX are covered by tests.",
        "Documentation reflects new config and workflow."
      ],
      "prompt": "Add tests and documentation for the stop-after-each-task review checkpoint feature.",
      "parentId": null,
      "childIds": [
        "tests-config-execution",
        "tests-cli-tui",
        "docs-update"
      ],
      "deps": [],
      "status": "done",
      "createdAt": "2026-02-04T02:39:50.928693Z",
      "updatedAt": "2026-02-04T04:46:32.53193Z"
    },
    "cli-request-changes-input": {
      "id": "cli-request-changes-input",
      "title": "CLI Request Changes Input",
      "description": "Multiline change-request input with @ file references for CLI.",
      "acceptanceCriteria": [
        "Users can enter multiline feedback and include @ file references.",
        "Feedback is passed to resume-with-feedback for the same task.",
        "Cancel returns to the decision prompt without mutating state."
      ],
      "prompt": "Implement CLI multiline input with @ file picker support and wire it to resume-with-feedback handling.",
      "parentId": "cli-review-checkpoint",
      "childIds": [],
      "deps": [
        "cli-review-prompt",
        "resume-with-feedback"
      ],
      "status": "done",
      "createdAt": "2026-02-04T02:39:50.928693Z",
      "updatedAt": "2026-02-04T04:05:45.883845Z"
    },
    "cli-review-checkpoint": {
      "id": "cli-review-checkpoint",
      "title": "CLI Review Checkpoint UX",
      "description": "Add CLI prompts for review checkpoints, including decision selection and request changes input.",
      "acceptanceCriteria": [
        "CLI shows a prominent review prompt with task metadata and summary.",
        "Decisions are captured via interactive selection and routed to the controller.",
        "Request changes collects multiline feedback with @ file references."
      ],
      "prompt": "Implement CLI review checkpoint UX that integrates with the shared execution controller.",
      "parentId": null,
      "childIds": [
        "cli-review-prompt",
        "cli-request-changes-input"
      ],
      "deps": [],
      "status": "done",
      "createdAt": "2026-02-04T02:39:50.928693Z",
      "updatedAt": "2026-02-04T04:05:45.883845Z"
    },
    "cli-review-prompt": {
      "id": "cli-review-prompt",
      "title": "CLI Review Prompt",
      "description": "Interactive CLI decision prompt after each task with summary and options.",
      "acceptanceCriteria": [
        "Prompt shows task id/title, run status, and review summary.",
        "Options include approve+continue, approve+quit, request changes, reject.",
        "Selection uses arrow/j/k + enter and routes decisions to the controller."
      ],
      "prompt": "Update internal/cli execute flow to render the review prompt and handle decision selection.",
      "parentId": "cli-review-checkpoint",
      "childIds": [],
      "deps": [
        "execution-checkpoint-controller"
      ],
      "status": "done",
      "createdAt": "2026-02-04T02:39:50.928693Z",
      "updatedAt": "2026-02-04T03:54:41.546156Z"
    },
    "config-stop-after-each-task": {
      "id": "config-stop-after-each-task",
      "title": "Config: stopAfterEachTask",
      "description": "Extend config schema and resolution to include execution.stopAfterEachTask.",
      "acceptanceCriteria": [
        "Raw/Resolved config structs include execution.stopAfterEachTask with default false.",
        "Load/resolve merges global and project config with precedence and ignores invalid layers.",
        "Unit tests cover default false and project-over-global overrides."
      ],
      "prompt": "Update internal/config types, defaults, resolve/load logic, and tests to support execution.stopAfterEachTask with default false.",
      "parentId": "review-checkpoint-core",
      "childIds": [],
      "deps": [],
      "status": "done",
      "createdAt": "2026-02-04T02:39:50.928693Z",
      "updatedAt": "2026-02-04T02:45:38.983371Z"
    },
    "docs-update": {
      "id": "docs-update",
      "title": "Docs: Review Checkpoint",
      "description": "Document the stop-after-each-task config key and review checkpoint workflow.",
      "acceptanceCriteria": [
        "docs/CONFIGURATION.md documents execution.stopAfterEachTask default and precedence.",
        "docs/TUI.md and CLI docs describe the review prompt and request changes flow.",
        "Docs mention resume limitations and error behavior."
      ],
      "prompt": "Update documentation to describe stop-after-each-task review checkpoints and decision outcomes.",
      "parentId": "checkpoint-tests-docs",
      "childIds": [],
      "deps": [
        "config-stop-after-each-task",
        "execution-checkpoint-controller",
        "cli-review-prompt",
        "tui-review-modal"
      ],
      "status": "done",
      "createdAt": "2026-02-04T02:39:50.928693Z",
      "updatedAt": "2026-02-04T04:35:34.773051Z"
    },
    "execution-checkpoint-controller": {
      "id": "execution-checkpoint-controller",
      "title": "Execution Checkpoint Controller",
      "description": "Update the execution loop to stop after each task when enabled and wait for a decision before continuing.",
      "acceptanceCriteria": [
        "With stopAfterEachTask=false, execution behavior is unchanged.",
        "With stopAfterEachTask=true, execution stops after each terminal run and awaits a decision.",
        "Decision outcomes (approve continue/quit, request changes, reject) are persisted and affect flow.",
        "Shared controller APIs exist for CLI/TUI to resolve decisions."
      ],
      "prompt": "Modify internal/execution RunExecute (or add a controller) to implement decision checkpoint flow and expose APIs for resolving decisions.",
      "parentId": "review-checkpoint-core",
      "childIds": [],
      "deps": [
        "config-stop-after-each-task",
        "run-decision-gate-model",
        "review-summary-capture",
        "resume-with-feedback"
      ],
      "status": "done",
      "createdAt": "2026-02-04T02:39:50.928693Z",
      "updatedAt": "2026-02-04T03:37:10.640692Z"
    },
    "resume-with-feedback": {
      "id": "resume-with-feedback",
      "title": "Resume With Feedback",
      "description": "Support request-changes by resuming the same provider session with feedback injection.",
      "acceptanceCriteria": [
        "Run records store provider session reference needed for resume.",
        "Resume helper uses provider-specific resume commands for Codex and Claude with feedback.",
        "Missing or unsupported resume paths return clear errors with no silent fallback."
      ],
      "prompt": "Add resume-with-feedback support using provider resume commands, stored session refs, and clear error handling; add tests.",
      "parentId": "review-checkpoint-core",
      "childIds": [],
      "deps": [
        "run-decision-gate-model"
      ],
      "status": "done",
      "createdAt": "2026-02-04T02:39:50.928693Z",
      "updatedAt": "2026-02-04T03:05:08.736269Z"
    },
    "review-checkpoint-core": {
      "id": "review-checkpoint-core",
      "title": "Review Checkpoint Core",
      "description": "Implement the execution-layer review checkpoint capability (config, decision gate, review summary, resume-with-feedback, and controller flow).",
      "acceptanceCriteria": [
        "Config supports execution.stopAfterEachTask with default false and precedence rules.",
        "Run records persist decision gate state and review summaries.",
        "Execution controller pauses after each task and honors approve/quit/request-changes/reject outcomes.",
        "Resume-with-feedback uses provider resume with clear errors when unavailable."
      ],
      "prompt": "Coordinate and implement the core execution-layer changes for stop-after-each-task review checkpoints; exclude CLI/TUI presentation details.",
      "parentId": null,
      "childIds": [
        "config-stop-after-each-task",
        "run-decision-gate-model",
        "review-summary-capture",
        "resume-with-feedback",
        "execution-checkpoint-controller"
      ],
      "deps": [],
      "status": "done",
      "createdAt": "2026-02-04T02:39:50.928693Z",
      "updatedAt": "2026-02-04T03:37:10.640692Z"
    },
    "review-summary-capture": {
      "id": "review-summary-capture",
      "title": "Review Summary Capture",
      "description": "Generate bounded change summaries after each run and store them.",
      "acceptanceCriteria": [
        "Summary generation uses git status/diff and enforces size limits on files/snippets.",
        "Failures fall back to a minimal summary without blocking completion.",
        "Run records persist review summaries for completed tasks."
      ],
      "prompt": "Implement review summary capture helper in execution package; integrate into run completion path; add tests for bounded output and fallback.",
      "parentId": "review-checkpoint-core",
      "childIds": [],
      "deps": [
        "run-decision-gate-model"
      ],
      "status": "done",
      "createdAt": "2026-02-04T02:39:50.928693Z",
      "updatedAt": "2026-02-04T03:17:53.101918Z"
    },
    "run-decision-gate-model": {
      "id": "run-decision-gate-model",
      "title": "Run Decision Gate Model",
      "description": "Add decision gate fields and review summary data to execution run records.",
      "acceptanceCriteria": [
        "RunRecord includes decision_required/state/timestamps/feedback and review_summary fields.",
        "Decision state constants are defined and used consistently.",
        "Save/Load round-trip preserves decision gate data."
      ],
      "prompt": "Extend internal/execution RunRecord and related types to store decision gate state and review summary data; update storage tests.",
      "parentId": "review-checkpoint-core",
      "childIds": [],
      "deps": [],
      "status": "done",
      "createdAt": "2026-02-04T02:39:50.928693Z",
      "updatedAt": "2026-02-04T02:49:59.7366Z"
    },
    "tests-cli-tui": {
      "id": "tests-cli-tui",
      "title": "Tests: CLI + TUI UX",
      "description": "Test CLI decision prompts and TUI review modals, including request changes input.",
      "acceptanceCriteria": [
        "CLI tests cover decision prompt selection and request changes input handling.",
        "TUI tests cover modal rendering, action-required indicator, and @ file picker integration.",
        "Tests pass using existing helpers and fixtures."
      ],
      "prompt": "Add CLI and TUI tests for review checkpoint decision handling and request changes input.",
      "parentId": "checkpoint-tests-docs",
      "childIds": [],
      "deps": [
        "cli-review-prompt",
        "cli-request-changes-input",
        "tui-review-modal",
        "tui-request-changes-modal"
      ],
      "status": "done",
      "createdAt": "2026-02-04T02:39:50.928693Z",
      "updatedAt": "2026-02-04T04:46:32.53193Z"
    },
    "tests-config-execution": {
      "id": "tests-config-execution",
      "title": "Tests: Config + Execution",
      "description": "Test config precedence, decision gate persistence, execution pause, decision outcomes, summary capture, and resume-with-feedback.",
      "acceptanceCriteria": [
        "Config tests cover default false and project-over-global overrides.",
        "Execution tests verify pause-after-task and decision outcomes (continue/quit/reject/request changes).",
        "Review summary capture tests cover success and fallback paths."
      ],
      "prompt": "Add unit tests for config resolution and execution checkpoint behavior, including summary capture and resume-with-feedback.",
      "parentId": "checkpoint-tests-docs",
      "childIds": [],
      "deps": [
        "config-stop-after-each-task",
        "run-decision-gate-model",
        "review-summary-capture",
        "resume-with-feedback",
        "execution-checkpoint-controller"
      ],
      "status": "done",
      "createdAt": "2026-02-04T02:39:50.928693Z",
      "updatedAt": "2026-02-04T04:10:56.471141Z"
    },
    "tui-request-changes-modal": {
      "id": "tui-request-changes-modal",
      "title": "TUI Request Changes Modal",
      "description": "Multiline request-changes modal with @ file picker reuse.",
      "acceptanceCriteria": [
        "Request changes opens multiline input with @ file picker behavior matching plan modals.",
        "Feedback is passed to resume-with-feedback and re-enters review on completion.",
        "Escape/back returns to the review modal without losing state."
      ],
      "prompt": "Reuse plan generate/refine modal + file picker components to implement request changes input in TUI.",
      "parentId": "tui-review-checkpoint",
      "childIds": [],
      "deps": [
        "tui-review-modal",
        "resume-with-feedback"
      ],
      "status": "done",
      "createdAt": "2026-02-04T02:39:50.928693Z",
      "updatedAt": "2026-02-04T04:42:51.449096Z"
    },
    "tui-review-checkpoint": {
      "id": "tui-review-checkpoint",
      "title": "TUI Review Checkpoint UX",
      "description": "Add TUI banner/modal for decision gates and request-changes input.",
      "acceptanceCriteria": [
        "TUI surfaces an action-required banner and review modal on checkpoint.",
        "Decision buttons route actions to the shared controller.",
        "Request changes uses multiline input with @ file picker."
      ],
      "prompt": "Implement TUI review checkpoint UX that integrates with the shared execution controller.",
      "parentId": null,
      "childIds": [
        "tui-review-modal",
        "tui-request-changes-modal"
      ],
      "deps": [],
      "status": "done",
      "createdAt": "2026-02-04T02:39:50.928693Z",
      "updatedAt": "2026-02-04T04:42:51.449096Z"
    },
    "tui-review-modal": {
      "id": "tui-review-modal",
      "title": "TUI Review Modal",
      "description": "Banner + modal for decision gates with summary and action buttons.",
      "acceptanceCriteria": [
        "Modal shows task metadata and review summary with action buttons.",
        "Action-required indicator is visible until a decision is made.",
        "Decisions route to the controller and update run state."
      ],
      "prompt": "Add TUI state and rendering for the review checkpoint modal and action-required banner.",
      "parentId": "tui-review-checkpoint",
      "childIds": [],
      "deps": [
        "execution-checkpoint-controller"
      ],
      "status": "done",
      "createdAt": "2026-02-04T02:39:50.928693Z",
      "updatedAt": "2026-02-04T04:31:28.568821Z"
    }
  }
}
