{
  "schemaVersion": 1,
  "items": {
    "feat-execution-view-live": {
      "id": "feat-execution-view-live",
      "title": "Render Live Output in Execution View",
      "description": "Render live stdout/stderr during in-progress execute/resume; fall back to run record output when not in progress.",
      "acceptanceCriteria": [
        "Execution pane shows live output while execute/resume is running",
        "After completion, view shows run record output as before",
        "Layout matches current execution view sections"
      ],
      "prompt": "Update execution view to prefer live buffers when actionInProgress for execute/resume. Keep existing rendering for completed runs.",
      "parentId": null,
      "childIds": [
        "task-execution-view-render"
      ],
      "deps": [
        "feat-streaming-pipeline"
      ],
      "status": "done",
      "createdAt": "2026-01-31T21:53:52.094244Z",
      "updatedAt": "2026-01-31T22:04:01.222596Z",
      "notes": ""
    },
    "feat-streaming-pipeline": {
      "id": "feat-streaming-pipeline",
      "title": "Execution Output Streaming Pipeline",
      "description": "Add optional streaming from execution layer to TUI, including runner configuration, model buffers, and Bubble Tea message flow.",
      "acceptanceCriteria": [
        "Execution layer exposes optional output streaming hook",
        "TUI receives output chunks during execute/resume",
        "Live buffers append output until run completes or is cancelled"
      ],
      "prompt": "Implement end-to-end output streaming: execution config → runner/launcher → TUI channel/Cmd → model buffers.",
      "parentId": null,
      "childIds": [
        "task-exec-config-hook",
        "task-exec-multiwriter",
        "task-tui-stream-cmd",
        "task-model-live-buffers"
      ],
      "deps": [],
      "status": "done",
      "createdAt": "2026-01-31T21:53:52.094244Z",
      "updatedAt": "2026-01-31T22:07:58.09869Z",
      "notes": ""
    },
    "feat-tests": {
      "id": "feat-tests",
      "title": "Streaming and Toggle Tests",
      "description": "Add tests for tab toggling during runs and for streaming buffer behavior or view rendering.",
      "acceptanceCriteria": [
        "Test verifies `t` toggles tabs during execute/resume action",
        "At least one test covers live buffer handling or execution view rendering",
        "All tests pass"
      ],
      "prompt": "Add/extend tests for key toggling and streaming output/view behavior. Prefer unit tests with minimal dependencies.",
      "parentId": null,
      "childIds": [
        "task-test-t-toggle",
        "task-test-streaming-or-view"
      ],
      "deps": [
        "feat-tui-toggle-tab",
        "feat-streaming-pipeline",
        "feat-execution-view-live"
      ],
      "status": "done",
      "createdAt": "2026-01-31T21:53:52.094244Z",
      "updatedAt": "2026-01-31T22:08:53.733299Z",
      "notes": ""
    },
    "feat-tui-toggle-tab": {
      "id": "feat-tui-toggle-tab",
      "title": "Allow Execution Tab During Runs",
      "description": "Relax the TUI key handling guard so `t` toggles Details/Execution even while execute/resume is in progress, aligning with the spec behavior.",
      "acceptanceCriteria": [
        "Pressing `t` during an active execute or resume toggles to the Execution tab",
        "Plan generate/refine behavior remains unchanged if still intended to block `t`",
        "No regressions to tab toggling when no action is in progress"
      ],
      "prompt": "Update TUI key handling to allow `t` toggling during execute/resume actions. Keep behavior for other action modes consistent with spec.",
      "parentId": null,
      "childIds": [
        "task-tui-keyguard"
      ],
      "deps": [],
      "status": "done",
      "createdAt": "2026-01-31T21:53:52.094244Z",
      "updatedAt": "2026-01-31T22:04:55.456842Z",
      "notes": ""
    },
    "task-exec-config-hook": {
      "id": "task-exec-config-hook",
      "title": "Add Streaming Hook to Execute/Resume Config",
      "description": "Extend execution config structs with optional output streaming callback or writer(s).",
      "acceptanceCriteria": [
        "Execute/resume config includes optional output streaming hook (callback or writers)",
        "Existing callers compile without changes (optional field)"
      ],
      "prompt": "Add optional streaming field(s) to execution config types used by execute/resume. Choose callback or writer approach matching codebase style.",
      "parentId": "feat-streaming-pipeline",
      "childIds": [],
      "deps": [],
      "status": "done",
      "createdAt": "2026-01-31T21:53:52.094244Z",
      "updatedAt": "2026-01-31T21:56:51.925191Z",
      "notes": ""
    },
    "task-exec-multiwriter": {
      "id": "task-exec-multiwriter",
      "title": "Pipe Agent Output Through Streaming Hook",
      "description": "In runner/launcher, copy subprocess stdout/stderr to both existing buffers and the streaming sink.",
      "acceptanceCriteria": [
        "Agent stdout/stderr still captured for run records",
        "Output streaming hook receives incremental chunks",
        "No change to execute/resume completion behavior"
      ],
      "prompt": "Update execution runner/launcher to pipe stdout/stderr through an io.MultiWriter (or equivalent) that includes streaming sink and current capture.",
      "parentId": "feat-streaming-pipeline",
      "childIds": [],
      "deps": [
        "task-exec-config-hook"
      ],
      "status": "done",
      "createdAt": "2026-01-31T21:53:52.094244Z",
      "updatedAt": "2026-01-31T21:57:47.409813Z",
      "notes": ""
    },
    "task-execution-view-render": {
      "id": "task-execution-view-render",
      "title": "Execution View Live Buffer Rendering",
      "description": "Update `internal/tui/execution_view.go` to render live buffers when appropriate.",
      "acceptanceCriteria": [
        "Live buffers are used when in-progress execute/resume",
        "Run record output is used when not in progress",
        "No change to task summary section"
      ],
      "prompt": "Modify execution view rendering to switch log output source based on action state.",
      "parentId": "feat-execution-view-live",
      "childIds": [],
      "deps": [
        "task-model-live-buffers"
      ],
      "status": "done",
      "createdAt": "2026-01-31T21:53:52.094244Z",
      "updatedAt": "2026-01-31T22:04:01.222596Z",
      "notes": ""
    },
    "task-model-live-buffers": {
      "id": "task-model-live-buffers",
      "title": "Add Live Execution Buffers to Model",
      "description": "Introduce live stdout/stderr fields in the TUI model and clear them on completion/cancel.",
      "acceptanceCriteria": [
        "Model stores live stdout/stderr during execute/resume",
        "Buffers are cleared on completion or cancel",
        "No impact on completed run display"
      ],
      "prompt": "Add live buffer fields to the TUI model, update relevant reset/cleanup logic for execute/resume completion and cancel paths.",
      "parentId": "feat-streaming-pipeline",
      "childIds": [],
      "deps": [],
      "status": "done",
      "createdAt": "2026-01-31T21:53:52.094244Z",
      "updatedAt": "2026-01-31T22:02:42.020759Z",
      "notes": ""
    },
    "task-test-streaming-or-view": {
      "id": "task-test-streaming-or-view",
      "title": "Test Live Buffer Handling or View Rendering",
      "description": "Add a unit test to validate live buffer append logic or execution view uses live buffers when in progress.",
      "acceptanceCriteria": [
        "Test covers live buffer append/update path or view data source switch",
        "Test passes with new streaming behavior"
      ],
      "prompt": "Write a focused test for streaming message handling or execution view selection of live buffers during in-progress runs.",
      "parentId": "feat-tests",
      "childIds": [],
      "deps": [
        "task-tui-stream-cmd",
        "task-execution-view-render"
      ],
      "status": "done",
      "createdAt": "2026-01-31T21:53:52.094244Z",
      "updatedAt": "2026-01-31T22:08:53.733299Z",
      "notes": ""
    },
    "task-test-t-toggle": {
      "id": "task-test-t-toggle",
      "title": "Test `t` Toggle During Action",
      "description": "Unit test for key handling that ensures `t` switches tabs even when action in progress (execute/resume).",
      "acceptanceCriteria": [
        "Test fails before code change and passes after",
        "Test scoped to TUI model key handling"
      ],
      "prompt": "Add a unit test for `internal/tui/model.go` key handling that asserts `t` toggles tabs during execute/resume action states.",
      "parentId": "feat-tests",
      "childIds": [],
      "deps": [
        "task-tui-keyguard"
      ],
      "status": "done",
      "createdAt": "2026-01-31T21:53:52.094244Z",
      "updatedAt": "2026-01-31T22:05:46.963176Z",
      "notes": ""
    },
    "task-tui-keyguard": {
      "id": "task-tui-keyguard",
      "title": "Relax `t` Key Guard",
      "description": "Modify `internal/tui/model.go` to allow switching to the Execution tab during execute/resume runs.",
      "acceptanceCriteria": [
        "`t` toggles between Details and Execution while `actionInProgress` is true for execute/resume",
        "Guard remains for non-execute/resume if required by spec"
      ],
      "prompt": "In `internal/tui/model.go`, update the `case \"t\"` guard to allow toggling during execute/resume. Keep other cases unchanged.",
      "parentId": "feat-tui-toggle-tab",
      "childIds": [],
      "deps": [],
      "status": "done",
      "createdAt": "2026-01-31T21:53:52.094244Z",
      "updatedAt": "2026-01-31T22:04:55.456842Z",
      "notes": ""
    },
    "task-tui-stream-cmd": {
      "id": "task-tui-stream-cmd",
      "title": "Bubble Tea Streaming Cmd and Messages",
      "description": "Implement the channel-driven Cmd that forwards output chunks into the TUI Update loop.",
      "acceptanceCriteria": [
        "Output chunk message type exists and is handled in Update",
        "Streaming Cmd reads until channel close and then exits cleanly",
        "Live buffers append with each chunk"
      ],
      "prompt": "Create a message type for output chunks and a Cmd that reads a channel and sends messages. Update model to append chunks and re-issue Cmd as needed.",
      "parentId": "feat-streaming-pipeline",
      "childIds": [],
      "deps": [
        "task-model-live-buffers",
        "task-exec-config-hook"
      ],
      "status": "done",
      "createdAt": "2026-01-31T21:53:52.094244Z",
      "updatedAt": "2026-01-31T22:07:58.09869Z",
      "notes": ""
    }
  }
}
